static String getCredential(File file, String property) {
    String value = fromFile(file, property)
    if (value == null || value.isEmpty()) {
        throw new IllegalStateException(
                "Could not find property: " + property + " value in property file")
    }
    return "$value"
}

private static String fromFile(File file, String property) {
    Properties apiProperties = loadFileProperties(file)
    return apiProperties.getProperty(property)
}

static Properties loadFileProperties(File file) {
    Properties properties = new Properties()
        properties.load(file.newInputStream())
    return properties
}

ext {
    getCredential = this.&getCredential
}